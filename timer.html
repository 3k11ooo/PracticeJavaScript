<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/main.css" rel="stylesheet">
    <title>タイマー</title>


    <script>

        var timer1; //タイマーを格納する変数（タイマーID）の宣言
        
        
        //カウントダウン関数を1000ミリ秒毎に呼び出す関数
        function cntStart(num)
        {
          switch (num) {
            case 0: //タイマー開始関数
              document.timer.elements[2].disabled=true;
              timer1=setInterval("countDown()",1000);
              break;

            case 1: //タイマー停止関数
              document.timer.elements[2].disabled=false;
              clearInterval(timer1);
              break;

            default:
              break;
          }
        }

        //カウントダウン関数
        function countDown()
        {
          var min=document.timer.elements[0].value;
          var sec=document.timer.elements[1].value;
          
          if( (min=="") && (sec=="") )
          {
            alert("時刻を設定してください！");
            reSet();
          }
          else
          {
            if (min=="") min=0;
            min=parseInt(min);
            
            if (sec=="") sec=0;
            sec=parseInt(sec);
            
            tmWrite(min*60+sec-1);
          }
        }

        // setInterval("hyoji()",1000);
        
        //残り時間を書き出す関数
        function tmWrite(int)
        {
          int = parseInt(int);
          if (int<=0)
          {
            reSet();
            alert("時間です！");
          }
          else
          { 
            var min = Math.floor(int/60); // // 残り分数はintを60で割って切り捨てる。
            var sec = int % 60; // 残り秒数はintを60で割った余り
            document.getElementById("displayTimer").innerHTML = min + ":" + sec;

            // document.timer.elements[0].value=
            // document.timer.elements[0].disabled=false;
            // 残り秒数はintを60で割った余り
            // document.timer.elements[1].value=int % 60;
          }
        }

        setInterval("hyoji()",1000);
        
        //フォームを初期状態に戻す（リセット）関数
        function reSet()
        {
          document.timer.elements[0].clear = "";
          document.timer.elements[1].value = "";
          document.timer.elements[2].disabled=false;
          clearInterval(timer1);
        }  
          
    </script>
</head>
<body>
  <div id="displayTimer">
    ここにタイマーがある
  </div>
    <form name="timer">
        <input type="text" value="">分<br>
        <input type="text" value="">秒<br>
        <input type="button" value="1" onclick="cntStart(0)">
        <input type="button" value="2" onclick="cntStart(1)">
        <input type="button" vaule="3" onclick="reSet()">
    </form>

    
</body>
</html>